let E="install",h=[];function S(){const n=document.querySelector(".terminal-content.active").querySelectorAll(".typing-text");for(let o of n){const t=o.getAttribute("data-text");if(t&&!t.startsWith("#")&&!t.includes("or with")&&!t.includes("Clone an")&&!t.includes("Start your"))return t}return"mofa --help"}function M(){const e=S(),n=document.getElementById("main-copy-btn"),o=document.getElementById("success-message");navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{b(n,o)}).catch(()=>{C(e,n,o)}):C(e,n,o)}function C(e,n,o){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),b(n,o)}catch(s){console.error("Â§çÂà∂Â§±Ë¥•:",s)}document.body.removeChild(t)}function b(e,n){e.innerHTML=`
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>Copied!</span>
      `,e.classList.add("copied"),n.classList.remove("hidden"),setTimeout(()=>{e.innerHTML=`
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
          </svg>
          <span>Copy</span>
        `,e.classList.remove("copied"),n.classList.add("hidden")},2e3)}function A(e,n,o=50){return new Promise(t=>{e.textContent="",e.classList.add("typing");let s=0;const d=setInterval(()=>{s<n.length?(e.textContent+=n.charAt(s),e.style.width=(s+1)/n.length*100+"%",s++):(clearInterval(d),e.style.width="100%",t())},o);h.push(d)})}function q(){h.forEach(n=>clearInterval(n)),h=[],document.querySelectorAll(".typing-text").forEach(n=>{n.classList.remove("typing"),n.textContent="",n.style.width="0",n.style.opacity="0"})}async function w(e){const n=e.querySelectorAll(".typing-text");for(let o of n){const t=parseInt(o.getAttribute("data-delay")||0),s=o.getAttribute("data-text");t>0&&await new Promise(d=>{const c=setTimeout(d,t);h.push(c)}),await A(o,s,50)}}function B(e){if(E===e)return;q(),document.querySelectorAll(".terminal-tab").forEach(o=>{o.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".terminal-content").forEach(o=>{o.classList.remove("active")});const n=document.querySelector(`[data-content="${e}"]`);n.classList.add("active"),E=e,setTimeout(()=>{w(n)},100)}function I(){document.querySelectorAll(".terminal-tab").forEach(o=>{o.addEventListener("click",()=>{const t=o.getAttribute("data-tab");B(t)})});const e=document.getElementById("main-copy-btn");e&&e.addEventListener("click",M);const n=document.querySelector(".terminal-content.active");n&&setTimeout(()=>{w(n)},500)}const y={en:{name:"English",flag:"üá∫üá∏"},zh:{name:"‰∏≠Êñá",flag:"üá®üá≥"}};let v="en";function g(e){v=e,document.getElementById("page-title").textContent=y[e].title,document.getElementById("html-root").setAttribute("lang",e==="zh"?"zh-CN":"en");const n=document.getElementById("current-lang"),o=e==="en"?"zh":"en";n.textContent=`${y[o].flag} ${y[o].name}`,document.querySelectorAll("[data-en][data-zh]").forEach(m=>{const L=m.getAttribute(`data-${e}`);L&&(m.innerHTML=L)});const s=document.querySelector(".description-text-zh"),d=document.querySelector(".description-text-en");s&&d&&(e==="zh"?(s.style.display="block",d.style.display="none"):(s.style.display="none",d.style.display="block"));const c=document.getElementById("demo-video-iframe");c&&(e==="zh"?c.src="//player.bilibili.com/player.html?bvid=BV15fQPY6EnD&page=1&high_quality=1&danmaku=0":c.src="https://www.youtube.com/embed/-QApoNUPG-U"),localStorage.setItem("mofa-language",e)}function k(){const e=localStorage.getItem("mofa-language");e&&y[e]?g(e):g("en")}function z(){const e=document.getElementById("mobile-menu-toggle"),n=document.getElementById("mobile-menu"),o=document.getElementById("lang-toggle-mobile"),t=document.getElementById("current-lang-mobile");e&&n&&(e.addEventListener("click",function(){n.style.display==="none"||!n.style.display?n.style.display="block":n.style.display="none"}),document.addEventListener("click",function(c){!e.contains(c.target)&&!n.contains(c.target)&&(n.style.display="none")})),o&&o.addEventListener("click",function(){g(v==="en"?"zh":"en")});function s(){if(t){const c=v==="en"?"üá∫üá∏":"üá®üá≥";t.textContent=c}}const d=g;g=function(c){d(c),s()},s()}document.getElementById("lang-toggle").addEventListener("click",()=>{g(v==="en"?"zh":"en")});document.addEventListener("DOMContentLoaded",()=>{k(),I(),z()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".logo-letter.draggable");let n=!1,o=null,t=null,s=0,d=0,c=0,m=0;e.forEach(i=>{i.addEventListener("mousedown",function(l){l.preventDefault(),n=!0,o=i,t=i.closest(".logo-letter-container"),i.classList.add("dragging"),s=l.clientX,d=l.clientY;const a=t.getBoundingClientRect(),r=t.offsetParent.getBoundingClientRect();c=a.left-r.left,m=a.top-r.top,t.style.animation="none"}),i.addEventListener("touchstart",function(l){l.preventDefault(),n=!0,o=i,t=i.closest(".logo-letter-container"),i.classList.add("dragging");const a=l.touches[0];s=a.clientX,d=a.clientY;const r=t.getBoundingClientRect(),u=t.offsetParent.getBoundingClientRect();c=r.left-u.left,m=r.top-u.top,t.style.animation="none"})}),document.addEventListener("mousemove",function(i){if(!n||!o||!t)return;i.preventDefault();const l=i.clientX-s,a=i.clientY-d;let r=c+l,u=m+a;if(!o.classList.contains("letter-a")){const f=t.offsetParent,p=f.clientWidth-t.offsetWidth,x=f.clientHeight-t.offsetHeight;r=Math.max(0,Math.min(p,r)),u=Math.max(0,Math.min(x,u))}t.style.left=r+"px",t.style.top=u+"px"}),document.addEventListener("touchmove",function(i){if(!n||!o||!t)return;i.preventDefault();const l=i.touches[0],a=l.clientX-s,r=l.clientY-d;let u=c+a,f=m+r;if(!o.classList.contains("letter-a")){const p=t.offsetParent,x=p.clientWidth-t.offsetWidth,T=p.clientHeight-t.offsetHeight;u=Math.max(0,Math.min(x,u)),f=Math.max(0,Math.min(T,f))}t.style.left=u+"px",t.style.top=f+"px"}),document.addEventListener("mouseup",function(){n&&o&&t&&(o.classList.remove("dragging"),setTimeout(()=>{t.style.animation=""},100),n=!1,o=null,t=null)}),document.addEventListener("touchend",function(){n&&o&&t&&(o.classList.remove("dragging"),setTimeout(()=>{t.style.animation=""},100),n=!1,o=null,t=null)}),e.forEach(i=>{i.addEventListener("dblclick",function(){const l=i.closest(".logo-letter-container");if(!l)return;const a={"letter-m":{top:"12px",left:"14px"},"letter-o":{top:"66px",left:"14px"},"letter-f":{top:"65px",left:"100px"},"letter-a":{top:"94.5px",left:"109px"}},r=Array.from(i.classList).find(u=>u.startsWith("letter-"));r&&a[r]&&(l.style.top=a[r].top,l.style.left=a[r].left)})}),document.querySelectorAll(".logo-letter-container").forEach(i=>{if(i.addEventListener("mousemove",function(l){if(n)return;const a=i.getBoundingClientRect(),r=(l.clientX-a.left)/a.width,u=(l.clientY-a.top)/a.height;i.style.setProperty("--shine-x",`${r*100}%`),i.style.setProperty("--shine-y",`${u*100}%`),i.classList.add("shine-active")}),i.addEventListener("mouseleave",function(){i.classList.remove("shine-active")}),!i.querySelector(".letter-f")){let l=i.querySelector(".data-flow");l||(l=document.createElement("div"),l.className="data-flow",i.appendChild(l))}})});
