let L="install",p=[];function q(){const n=document.querySelector(".terminal-content.active").querySelectorAll(".typing-text");for(let t of n){const o=t.getAttribute("data-text");if(o&&!o.startsWith("#")&&!o.includes("or with")&&!o.includes("Clone an")&&!o.includes("Start your"))return o}return"mofa --help"}function B(){const e=q(),n=document.getElementById("main-copy-btn"),t=document.getElementById("success-message");navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{E(n,t)}).catch(()=>{b(e,n,t)}):b(e,n,t)}function b(e,n,t){const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy"),E(n,t)}catch(l){console.error("Â§çÂà∂Â§±Ë¥•:",l)}document.body.removeChild(o)}function E(e,n){e.innerHTML=`
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>Copied!</span>
      `,e.classList.add("copied"),n.classList.remove("hidden"),setTimeout(()=>{e.innerHTML=`
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
          </svg>
          <span>Copy</span>
        `,e.classList.remove("copied"),n.classList.add("hidden")},2e3)}function M(e,n,t=50){return new Promise(o=>{e.textContent="",e.classList.add("typing");let l=0;const s=setInterval(()=>{l<n.length?(e.textContent+=n.charAt(l),e.style.width=(l+1)/n.length*100+"%",l++):(clearInterval(s),e.style.width="100%",o())},t);p.push(s)})}function z(){p.forEach(n=>clearInterval(n)),p=[],document.querySelectorAll(".typing-text").forEach(n=>{n.classList.remove("typing"),n.textContent="",n.style.width="0",n.style.opacity="0"})}async function C(e){const n=e.querySelectorAll(".typing-text");for(let t of n){const o=parseInt(t.getAttribute("data-delay")||0),l=t.getAttribute("data-text");o>0&&await new Promise(s=>{const r=setTimeout(s,o);p.push(r)}),await M(t,l,50)}}function I(e){if(L===e)return;z(),document.querySelectorAll(".terminal-tab").forEach(t=>{t.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".terminal-content").forEach(t=>{t.classList.remove("active")});const n=document.querySelector(`[data-content="${e}"]`);n.classList.add("active"),L=e,setTimeout(()=>{C(n)},100)}function F(){document.querySelectorAll(".terminal-tab").forEach(t=>{t.addEventListener("click",()=>{const o=t.getAttribute("data-tab");I(o)})});const e=document.getElementById("main-copy-btn");e&&e.addEventListener("click",B);const n=document.querySelector(".terminal-content.active");n&&setTimeout(()=>{C(n)},500)}const g={en:{name:"English",flag:"üá∫üá∏"},zh:{name:"‰∏≠Êñá",flag:"üá®üá≥"}};let k="en";function w(e){k=e,document.getElementById("page-title").textContent=g[e].title,document.getElementById("html-root").setAttribute("lang",e==="zh"?"zh-CN":"en");const n=document.getElementById("current-lang"),t=e==="en"?"zh":"en";n.textContent=`${g[t].flag} ${g[t].name}`,document.querySelectorAll("[data-en][data-zh]").forEach(u=>{const y=u.getAttribute(`data-${e}`);y&&(u.innerHTML=y)});const l=document.querySelector(".description-text-zh"),s=document.querySelector(".description-text-en");l&&s&&(e==="zh"?(l.style.display="block",s.style.display="none"):(l.style.display="none",s.style.display="block"));const r=document.getElementById("demo-video-iframe");r&&(e==="zh"?r.src="//player.bilibili.com/player.html?bvid=BV15fQPY6EnD&page=1&high_quality=1&danmaku=0":r.src="https://www.youtube.com/embed/-QApoNUPG-U"),localStorage.setItem("mofa-language",e)}function P(){const e=localStorage.getItem("mofa-language");e&&g[e]?w(e):w("zh")}document.getElementById("lang-toggle").addEventListener("click",()=>{w(k==="en"?"zh":"en")});document.addEventListener("DOMContentLoaded",()=>{P(),F()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".logo-letter.draggable");let n=!1,t=null,o=null,l=0,s=0,r=0,u=0;e.forEach(a=>{a.addEventListener("mousedown",function(i){i.preventDefault(),n=!0,t=a,o=a.closest(".logo-letter-container"),a.classList.add("dragging"),l=i.clientX,s=i.clientY;const d=o.getBoundingClientRect(),m=o.offsetParent.getBoundingClientRect();r=d.left-m.left,u=d.top-m.top,o.style.animation="none"}),a.addEventListener("touchstart",function(i){i.preventDefault(),n=!0,t=a,o=a.closest(".logo-letter-container"),a.classList.add("dragging");const d=i.touches[0];l=d.clientX,s=d.clientY;const m=o.getBoundingClientRect(),c=o.offsetParent.getBoundingClientRect();r=m.left-c.left,u=m.top-c.top,o.style.animation="none"})}),document.addEventListener("mousemove",function(a){if(!n||!t||!o)return;a.preventDefault();const i=a.clientX-l,d=a.clientY-s;let m=r+i,c=u+d;if(!t.classList.contains("letter-a")){const f=o.offsetParent,h=f.clientWidth-o.offsetWidth,v=f.clientHeight-o.offsetHeight;m=Math.max(0,Math.min(h,m)),c=Math.max(0,Math.min(v,c))}o.style.left=m+"px",o.style.top=c+"px"}),document.addEventListener("touchmove",function(a){if(!n||!t||!o)return;a.preventDefault();const i=a.touches[0],d=i.clientX-l,m=i.clientY-s;let c=r+d,f=u+m;if(!t.classList.contains("letter-a")){const h=o.offsetParent,v=h.clientWidth-o.offsetWidth,T=h.clientHeight-o.offsetHeight;c=Math.max(0,Math.min(v,c)),f=Math.max(0,Math.min(T,f))}o.style.left=c+"px",o.style.top=f+"px"}),document.addEventListener("mouseup",function(){n&&t&&o&&(t.classList.remove("dragging"),setTimeout(()=>{o.style.animation=""},100),n=!1,t=null,o=null)}),document.addEventListener("touchend",function(){n&&t&&o&&(t.classList.remove("dragging"),setTimeout(()=>{o.style.animation=""},100),n=!1,t=null,o=null)}),e.forEach(a=>{a.addEventListener("dblclick",function(){const i=a.closest(".logo-letter-container");if(!i)return;const d={"letter-m":{top:"12px",left:"14px"},"letter-o":{top:"66px",left:"14px"},"letter-f":{top:"65px",left:"100px"},"letter-a":{top:"94.5px",left:"109px"}},m=Array.from(a.classList).find(c=>c.startsWith("letter-"));m&&d[m]&&(i.style.top=d[m].top,i.style.left=d[m].left)})}),document.querySelectorAll(".logo-letter-container").forEach(a=>{if(a.addEventListener("mousemove",function(i){if(n)return;const d=a.getBoundingClientRect(),m=(i.clientX-d.left)/d.width,c=(i.clientY-d.top)/d.height;a.style.setProperty("--shine-x",`${m*100}%`),a.style.setProperty("--shine-y",`${c*100}%`),a.classList.add("shine-active")}),a.addEventListener("mouseleave",function(){a.classList.remove("shine-active")}),!a.querySelector(".letter-f")){let i=a.querySelector(".data-flow");i||(i=document.createElement("div"),i.className="data-flow",a.appendChild(i))}})});const W="modulepreload",R=function(e){return"/"+e},x={},$=function(n,t,o){if(!t||t.length===0)return n();const l=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=R(s),s in x)return;x[s]=!0;const r=s.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!o)for(let i=l.length-1;i>=0;i--){const d=l[i];if(d.href===s&&(!r||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":W,r||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),r)return new Promise((i,d)=>{a.addEventListener("load",i),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>n()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};$(()=>import("https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs"),[]).then(e=>{e.default.initialize({startOnLoad:!0,theme:"base",themeVariables:{primaryColor:"#6366F1",primaryTextColor:"#1F2937",primaryBorderColor:"#6366F1",lineColor:"#0EA5E9",sectionBkgColor:"#F8FAFC",altSectionBkgColor:"#FFFFFF",gridColor:"#E5E7EB",secondaryColor:"#F59E0B",tertiaryColor:"#F59E0B"},fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontSize:20,flowchart:{htmlLabels:!0,curve:"basis",useMaxWidth:!0,rankdir:"TB",padding:20},security:{level:"loose"},maxTextSize:9e4,maxEdges:500}),setTimeout(()=>{e.default.run(),setTimeout(()=>{document.querySelectorAll(".mermaid").forEach(n=>{const t=n.querySelector("svg"),o=n.closest("[data-scale]"),l=o?parseFloat(o.getAttribute("data-scale")):1;if(t){if(t.removeAttribute("height"),t.removeAttribute("width"),t.style.maxWidth="100%",t.style.maxHeight="100%",!t.getAttribute("viewBox")){const s=t.getBBox();t.setAttribute("viewBox",`0 0 ${s.width+20} ${s.height+20}`)}t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.style.width=`${l*100}%`,t.style.height=`${l*100}%`,t.style.transform="none"}}),D(),H()},500)},100)}).catch(e=>{console.error("Failed to load Mermaid:",e)});function D(){const e=document.querySelector(".workflow-scroll");if(!e)return;const n=1.2;let t=null,o=!1,l=!1,s=null;Array.from(e.children).forEach(i=>{e.appendChild(i.cloneNode(!0)),e.insertBefore(i.cloneNode(!0),e.firstChild)}),requestAnimationFrame(()=>{const i=e.scrollWidth/3;e.scrollLeft=i});function u(){const i=e.scrollWidth/3;e.scrollLeft<=i*.2?e.scrollLeft+=i:e.scrollLeft>=i*1.8&&(e.scrollLeft-=i)}function y(){!o&&!l&&e&&(e.scrollLeft+=n,u()),t=requestAnimationFrame(y)}function a(){l=!0,s&&clearTimeout(s),s=setTimeout(()=>{l=!1},2e3)}["wheel","touchstart","touchmove","mousedown","mouseup"].forEach(i=>{e.addEventListener(i,a,{passive:!0})}),e.addEventListener("mouseenter",()=>{o=!0}),e.addEventListener("mouseleave",()=>{o=!1}),e.addEventListener("scroll",u),y(),window.addEventListener("beforeunload",()=>{t&&cancelAnimationFrame(t),s&&clearTimeout(s)})}function H(){document.querySelectorAll(".workflow-card").forEach(e=>{e.style.cursor="zoom-in"}),document.addEventListener("click",e=>{const n=e.target.closest(".workflow-card");if(!n)return;let t=n.querySelector(".mermaid svg")||n.querySelector(".mermaid");t&&(console.debug("[Gallery] Card clicked, opening modal"),S(t))},!0)}function S(e){if(!e)return;const n=Array.from(document.querySelectorAll('[class^="mermaid-container-"] svg, [class^="mermaid-container-"] .mermaid')).filter(Boolean);n.includes(e)||n.push(e);let t=n.findIndex(c=>c===e);t===-1&&(t=0);const o=document.querySelector(".workflow-modal");o&&o.remove();const l=document.createElement("div");l.className="workflow-modal",l.style.cssText="position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);padding:2rem;",l.innerHTML=`
      <button class="gallery-nav gallery-prev" aria-label="Prev">&#9664;</button>
      <button class="gallery-nav gallery-next" aria-label="Next">&#9654;</button>
      <div class="workflow-modal-content" style="position:relative;width:90vw;height:90vh;overflow:hidden;background:#FFF3D9;border-radius:8px;border:4px solid var(--mondrian-black);box-shadow:6px 6px 0 var(--mondrian-black);display:flex;flex-direction:column;">
        <button class="workflow-modal-close" aria-label="Close" style="position:absolute;top:0.25rem;right:0.5rem;font-size:1.5rem;background:transparent;border:none;color:#333;cursor:pointer;">&times;</button>
        <div class="workflow-modal-body" style="padding:1rem;display:flex;align-items:center;justify-content:center;flex:1;overflow:auto;"></div>
        <div class="gallery-zoom" style="position:absolute;bottom:0.5rem;right:0.75rem;display:flex;gap:0.5rem;">
          <button class="zoom-in" aria-label="Zoom in" style="font-size:1.25rem;width:2rem;height:2rem;border:none;border-radius:4px;background:#e5e7eb;cursor:pointer;">+</button>
          <button class="zoom-out" aria-label="Zoom out" style="font-size:1.25rem;width:2rem;height:2rem;border:none;border-radius:4px;background:#e5e7eb;cursor:pointer;">&minus;</button>
        </div>
      </div>`,document.body.appendChild(l);const s=l.querySelector(".workflow-modal-body");let r=1;function u(){s.innerHTML="";const c=n[t];if(!c)return;let f=c.cloneNode(!0);f.tagName.toLowerCase()==="svg"&&(f.removeAttribute("width"),f.removeAttribute("height"),f.style.width="100%",f.style.height="auto",f.style.maxWidth="100%",f.style.maxHeight="100%"),f.style.transformOrigin="center center",f.style.transform=`scale(${r})`,s.appendChild(f)}function y(c){t=(t+c+n.length)%n.length,r=1,u()}u(),l.querySelector(".gallery-prev").addEventListener("click",()=>y(-1)),l.querySelector(".gallery-next").addEventListener("click",()=>y(1)),l.querySelector(".zoom-in").addEventListener("click",()=>{r=Math.min(r+.2,4),u()}),l.querySelector(".zoom-out").addEventListener("click",()=>{r=Math.max(r-.2,.4),u()});const a=document.body.style.overflow;document.body.style.overflow="hidden";const i=()=>{l.remove(),document.body.style.overflow=a,document.removeEventListener("keydown",d),document.removeEventListener("keydown",m)};l.querySelector(".workflow-modal-close").addEventListener("click",i),l.addEventListener("click",c=>{c.target===l&&i()});const d=c=>{c.key==="Escape"&&i()};document.addEventListener("keydown",d);const m=c=>{c.key==="ArrowLeft"?y(-1):c.key==="ArrowRight"?y(1):c.key==="+"?(r=Math.min(r+.2,4),u()):c.key==="-"&&(r=Math.max(r-.2,.4),u())};document.addEventListener("keydown",m)}document.addEventListener("click",e=>{const n=e.target.closest(".workflow-view-btn");if(!n)return;e.stopPropagation();const t=n.getAttribute("data-target-id"),o=document.querySelector(`.mermaid-container-${t} svg`)||document.querySelector(`.mermaid-container-${t} .mermaid`);o&&(console.log("[ViewBtn] opening modal for",t),window.openWorkflowModal(o))},!0);const A=()=>document.querySelectorAll(".workflow-card").forEach(e=>e.style.cursor="zoom-in");A();new MutationObserver(A).observe(document.querySelector(".workflow-scroll"),{childList:!0});window.openWorkflowModal=S;document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("#hof-tabs .category-tab"),n=document.querySelectorAll(".category-content"),t=document.querySelector('[data-category="contributors"]');t&&t.classList.add("bg-gray-200","border-gray-600"),e.forEach(l=>{l.addEventListener("click",()=>{const s=l.getAttribute("data-category");e.forEach(r=>{r===l?r.classList.add("bg-gray-200","border-gray-600"):r.classList.remove("bg-gray-200","border-gray-600")}),n.forEach(r=>{r.getAttribute("data-category")===s?(r.style.display="flex",setTimeout(()=>{o()},100)):r.style.display="none"})})});function o(){document.querySelectorAll(".contributor-item").forEach(s=>{const r=s.querySelector(".contributor-card"),u=s.querySelector(".arrow-left"),y=s.querySelector(".arrow-right");r&&u&&y&&s.addEventListener("mouseenter",()=>{const a=s.getBoundingClientRect(),i=window.innerWidth,d=256,m=16,c=i-(a.right+d+m),f=a.left-d-m;c>=0?(r.classList.remove("right-full","mr-4"),r.classList.add("left-full","ml-4"),u.classList.remove("hidden"),y.classList.add("hidden")):f>=0?(r.classList.remove("left-full","ml-4"),r.classList.add("right-full","mr-4"),u.classList.add("hidden"),y.classList.remove("hidden")):(r.classList.remove("right-full","mr-4"),r.classList.add("left-full","ml-4"),u.classList.remove("hidden"),y.classList.add("hidden"))})})}setTimeout(()=>{o()},100),window.addEventListener("resize",()=>{o()})});
