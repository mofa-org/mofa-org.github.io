const m={en:{name:"English",flag:"ðŸ‡ºðŸ‡¸"},zh:{name:"ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"}};let y="en";function h(i){y=i,document.getElementById("page-title").textContent=m[i].title,document.getElementById("html-root").setAttribute("lang",i==="zh"?"zh-CN":"en");const a=document.getElementById("current-lang"),e=i==="en"?"zh":"en";a.textContent=`${m[e].flag} ${m[e].name}`,document.querySelectorAll("[data-en][data-zh]").forEach(l=>{const c=l.getAttribute(`data-${i}`);c&&(l.innerHTML=c)});const d=document.getElementById("demo-video-iframe");d&&(i==="zh"?d.src="//player.bilibili.com/player.html?bvid=BV15fQPY6EnD&page=1&high_quality=1&danmaku=0":d.src="https://www.youtube.com/embed/-QApoNUPG-U"),localStorage.setItem("mofa-language",i)}function E(){const i=localStorage.getItem("mofa-language");i&&m[i]?h(i):h("en")}document.getElementById("lang-toggle").addEventListener("click",()=>{h(y==="en"?"zh":"en")});document.addEventListener("DOMContentLoaded",E);document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll(".logo-letter.draggable");let a=!1,e=null,n=null,d=0,l=0,c=0,f=0;i.forEach(t=>{t.addEventListener("mousedown",function(o){o.preventDefault(),a=!0,e=t,n=t.closest(".logo-letter-container"),t.classList.add("dragging"),d=o.clientX,l=o.clientY;const s=n.getBoundingClientRect(),r=n.offsetParent.getBoundingClientRect();c=s.left-r.left,f=s.top-r.top,n.style.animation="none"}),t.addEventListener("touchstart",function(o){o.preventDefault(),a=!0,e=t,n=t.closest(".logo-letter-container"),t.classList.add("dragging");const s=o.touches[0];d=s.clientX,l=s.clientY;const r=n.getBoundingClientRect(),u=n.offsetParent.getBoundingClientRect();c=r.left-u.left,f=r.top-u.top,n.style.animation="none"})}),document.addEventListener("mousemove",function(t){if(!a||!e||!n)return;t.preventDefault();const o=t.clientX-d,s=t.clientY-l,r=Math.max(0,Math.min(window.innerWidth-n.offsetWidth,c+o)),u=Math.max(0,Math.min(window.innerHeight-n.offsetHeight,f+s));n.style.left=r+"px",n.style.top=u+"px"}),document.addEventListener("touchmove",function(t){if(!a||!e||!n)return;t.preventDefault();const o=t.touches[0],s=o.clientX-d,r=o.clientY-l,u=Math.max(0,Math.min(window.innerWidth-n.offsetWidth,c+s)),g=Math.max(0,Math.min(window.innerHeight-n.offsetHeight,f+r));n.style.left=u+"px",n.style.top=g+"px"}),document.addEventListener("mouseup",function(){a&&e&&n&&(e.classList.remove("dragging"),setTimeout(()=>{n.style.animation=""},100),a=!1,e=null,n=null)}),document.addEventListener("touchend",function(){a&&e&&n&&(e.classList.remove("dragging"),setTimeout(()=>{n.style.animation=""},100),a=!1,e=null,n=null)}),i.forEach(t=>{t.addEventListener("dblclick",function(){const o=t.closest(".logo-letter-container");if(!o)return;const s={"letter-m":{top:"12px",left:"14px"},"letter-o":{top:"66px",left:"14px"},"letter-f":{top:"12px",left:"76px"},"letter-a":{top:"60px",left:"80px"}},r=Array.from(t.classList).find(u=>u.startsWith("letter-"));r&&s[r]&&(o.style.top=s[r].top,o.style.left=s[r].left)})}),document.querySelectorAll(".logo-letter-container").forEach(t=>{t.addEventListener("mousemove",function(s){if(a)return;const r=t.getBoundingClientRect(),u=(s.clientX-r.left)/r.width,g=(s.clientY-r.top)/r.height;t.style.setProperty("--shine-x",`${u*100}%`),t.style.setProperty("--shine-y",`${g*100}%`),t.classList.add("shine-active")}),t.addEventListener("mouseleave",function(){t.classList.remove("shine-active")});let o=t.querySelector(".data-flow");o||(o=document.createElement("div"),o.className="data-flow",t.appendChild(o))})});const L="modulepreload",w=function(i){return"/"+i},p={},x=function(a,e,n){if(!e||e.length===0)return a();const d=document.getElementsByTagName("link");return Promise.all(e.map(l=>{if(l=w(l),l in p)return;p[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!n)for(let o=d.length-1;o>=0;o--){const s=d[o];if(s.href===l&&(!c||s.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const t=document.createElement("link");if(t.rel=c?"stylesheet":L,c||(t.as="script",t.crossOrigin=""),t.href=l,document.head.appendChild(t),c)return new Promise((o,s)=>{t.addEventListener("load",o),t.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>a()).catch(l=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l})};x(()=>import("https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs"),[]).then(i=>{i.default.initialize({startOnLoad:!0,theme:"base",themeVariables:{primaryColor:"#6366F1",primaryTextColor:"#1F2937",primaryBorderColor:"#6366F1",lineColor:"#0EA5E9",sectionBkgColor:"#F8FAFC",altSectionBkgColor:"#FFFFFF",gridColor:"#E5E7EB",secondaryColor:"#F59E0B",tertiaryColor:"#F59E0B"},fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontSize:24,flowchart:{htmlLabels:!0,curve:"basis",useMaxWidth:!0,rankdir:"TB",padding:25},security:{level:"loose"},maxTextSize:9e4,maxEdges:500}),setTimeout(()=>{i.default.run(),setTimeout(()=>{document.querySelectorAll(".mermaid").forEach(a=>{const e=a.querySelector("svg"),n=a.closest("[data-scale]"),d=n?parseFloat(n.getAttribute("data-scale")):1;if(e){if(e.removeAttribute("height"),e.removeAttribute("width"),e.style.maxWidth="100%",e.style.maxHeight="100%",!e.getAttribute("viewBox")){const l=e.getBBox();e.setAttribute("viewBox",`0 0 ${l.width+20} ${l.height+20}`)}e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.style.width=`${d*100}%`,e.style.height=`${d*100}%`,e.style.transform="none"}})},500)},100)}).catch(i=>{console.error("Failed to load Mermaid:",i)});
