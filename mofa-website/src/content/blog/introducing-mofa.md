---
title: "MoFA æ¶æ„æ·±åº¦è§£æï¼šåŸºäº Dora-RS çš„ä¸‹ä¸€ä»£ AI æ™ºèƒ½ä½“æ¡†æ¶"
description: "æ·±å…¥è§£æ MoFA çš„æŠ€æœ¯æ¶æ„ï¼Œæ¢è®¨å…¶å¦‚ä½•åŸºäºé«˜æ€§èƒ½çš„ Dora-RS æ¡†æ¶æ„å»ºæ¨¡å—åŒ–ã€å¯ç»„åˆçš„ AI æ™ºèƒ½ä½“ç³»ç»Ÿ"
date: 2025-06-09
author: MoFA å›¢é˜Ÿ
tags: [æ¶æ„, AIæ¡†æ¶, Dora-RS, æ™ºèƒ½ä½“, æŠ€æœ¯æ·±åº¦]
---

# MoFA æ¶æ„æ·±åº¦è§£æï¼šåŸºäº Dora-RS çš„ä¸‹ä¸€ä»£ AI æ™ºèƒ½ä½“æ¡†æ¶

åœ¨ AI æ™ºèƒ½ä½“å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„æ™ºèƒ½ä½“ç³»ç»Ÿå˜å¾—å°¤ä¸ºé‡è¦ã€‚MoFAï¼ˆ**M**odular **F**ramework for **A**gentï¼‰ä½œä¸ºæ–°ä¸€ä»£çš„æ™ºèƒ½ä½“å¼€å‘æ¡†æ¶ï¼ŒåŸºäºé«˜æ€§èƒ½çš„ Dora-RS æ•°æ®æµå¼•æ“ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªç‹¬ç‰¹çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥è§£æ MoFA çš„æŠ€æœ¯æ¶æ„ï¼Œæ¢è®¨å…¶è®¾è®¡ç†å¿µå’ŒæŠ€æœ¯ä¼˜åŠ¿ã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

![MoFA ä¸ Dora-RS æ¶æ„å›¾](./structure.svg)

MoFA ä¸ Dora-RS å½¢æˆäº†å®Œç¾çš„**åˆ†å±‚äº’è¡¥**å…³ç³»ï¼Œæ„æˆäº†ä»åº•å±‚ç¡¬ä»¶åˆ°ä¸Šå±‚ AI åº”ç”¨çš„å®Œæ•´æŠ€æœ¯æ ˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MoFA å±‚                   â”‚  â† AIæ™ºèƒ½ä½“å¼€å‘æ¡†æ¶
â”‚  æ™ºèƒ½ä½“æ¨¡æ¿ + ç»„åˆé€»è¾‘ + AIOSæœåŠ¡    â”‚     (Pythonä¸ºä¸»)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Dora å±‚                   â”‚  â† é«˜æ€§èƒ½æ•°æ®æµå¼•æ“  
â”‚  å®æ—¶é€šä¿¡ + è·¨è¯­è¨€ + ç¡¬ä»¶æŠ½è±¡       â”‚     (Rustæ ¸å¿ƒ)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ MoFA æ ¸å¿ƒæ¶æ„ç»„ä»¶

### 1. æ™ºèƒ½ä½“æ„å»ºæ¡†æ¶ (Agent Build Framework)

è¿™æ˜¯ MoFA çš„æ ¸å¿ƒæŠ½è±¡å±‚ï¼Œæä¾›äº†å¤šç§æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼š

#### **åŸºç¡€æ™ºèƒ½ä½“ (Base Agent)**
```python
from mofa.agent_build.base.base_agent import MofaAgent
from dora import Node  # ç›´æ¥é›†æˆ Dora

class MofaAgent:
    def __attrs_post_init__(self):
        self.node = Node(self.agent_name)  # åˆ›å»º Dora èŠ‚ç‚¹
        
    def receive_parameter(self, parameter_name: str):
        for event in self.node:  # ä½¿ç”¨ Dora äº‹ä»¶å¾ªç¯
            # MoFA çš„æ™ºèƒ½ä½“é€»è¾‘
            
    def send_output(self, output_name: str, result: Any):
        self.node.send_output(output_name, ...)  # é€šè¿‡ Dora å‘é€
```

#### **æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼**
- **ReasonER**: æ¨ç†æ¨¡å¼æ™ºèƒ½ä½“ï¼Œæ”¯æŒå¤æ‚çš„é€»è¾‘æ¨ç†
- **CrewAI Integration**: é›†æˆ CrewAI çš„å¤šæ™ºèƒ½ä½“åä½œ
- **Self Refine**: è‡ªåæ€æ¨¡å¼ï¼Œæ”¯æŒè¾“å‡ºçš„è‡ªæˆ‘æ”¹è¿›

### 2. å†…æ ¸æœåŠ¡ (Kernel Services) - è¿ˆå‘ AIOS

MoFA æä¾›äº†ç±»ä¼¼æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ï¼Œè¿™äº›æœåŠ¡æ„æˆäº† AI æ“ä½œç³»ç»Ÿ (AIOS) çš„åŸºç¡€ï¼š

- **Memory**: æ™ºèƒ½ä½“è®°å¿†ç®¡ç†
- **Planning**: ä»»åŠ¡è§„åˆ’å’Œè°ƒåº¦
- **RAG**: æ£€ç´¢å¢å¼ºç”Ÿæˆ
- **Tools**: å·¥å…·è°ƒç”¨å’Œç®¡ç†

### 3. æ™ºèƒ½ä½“æ¨¡æ¿ (Agent Templates)

é¢„æ„å»ºçš„æ™ºèƒ½ä½“æ¨¡å¼ï¼Œé™ä½å¼€å‘é—¨æ§›ï¼š

```yaml
# æ™ºèƒ½ä½“æ¨¡æ¿é…ç½®ç¤ºä¾‹
nodes:
  - id: reasoning-agent
    build: pip install -e ../../agent-hub/openai-agent
    path: openai-agent
    inputs:
      query: terminal-input/data
    outputs:
      - reasoning_result
```

### 4. åŒé‡ Hub ç”Ÿæ€

#### **Node Hub**: æ‰©å±• Dora ç”Ÿæ€
- `terminal-input` / `terminal-print`: å¢å¼ºçš„ I/O èŠ‚ç‚¹
- `dora-openai-server`: OpenAI API æœåŠ¡é›†æˆ
- `openai-server-stream`: æµå¼ AI æœåŠ¡

#### **Agent Hub**: 40+ é¢„æ„å»ºæ™ºèƒ½ä½“
- `hello-world`: åŸºç¡€ç¤ºä¾‹æ™ºèƒ½ä½“
- `openai-agent`: OpenAI é›†æˆæ™ºèƒ½ä½“
- `memory-agent`: å¸¦è®°å¿†çš„æ™ºèƒ½ä½“
- `kling-agent`: è§†é¢‘ç”Ÿæˆæ™ºèƒ½ä½“
- æ›´å¤šä¸“ä¸šæ™ºèƒ½ä½“...

## âš¡ Dora-RSï¼šé«˜æ€§èƒ½åŸºç¡€è®¾æ–½

### æ ¸å¿ƒæ¶æ„å±‚æ¬¡

Dora-RS ä¸º MoFA æä¾›äº†å·¥ä¸šçº§çš„æ€§èƒ½åŸºç¡€ï¼š

```
dora/
â”œâ”€â”€ binaries/              ğŸš€ è¿è¡Œæ—¶ç»„ä»¶
â”‚   â”œâ”€â”€ cli/              # dora å‘½ä»¤è¡Œå·¥å…·
â”‚   â”œâ”€â”€ coordinator/      # åˆ†å¸ƒå¼åè°ƒå™¨
â”‚   â”œâ”€â”€ daemon/           # åå°å®ˆæŠ¤è¿›ç¨‹
â”‚   â””â”€â”€ runtime/          # æ•°æ®æµè¿è¡Œæ—¶
â”œâ”€â”€ libraries/             ğŸ”§ åº•å±‚æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒè°ƒåº¦å¼•æ“
â”‚   â”œâ”€â”€ communication-layer/ # é€šä¿¡å±‚
â”‚   â”œâ”€â”€ shared-memory-server/ # å…±äº«å†…å­˜æœåŠ¡
â”‚   â””â”€â”€ message/         # åŸºäº Apache Arrow çš„æ¶ˆæ¯ç³»ç»Ÿ
â”œâ”€â”€ apis/                 ğŸŒ å¤šè¯­è¨€ API
â”‚   â”œâ”€â”€ rust/ python/ c/ c++/  # è·¨è¯­è¨€æ”¯æŒ
â””â”€â”€ node-hub/            ğŸ“¦ 60+ é¢„æ„å»ºèŠ‚ç‚¹
    â”œâ”€â”€ dora-yolo/       # YOLO ç›®æ ‡æ£€æµ‹
    â”œâ”€â”€ dora-sam2/       # SAM2 åˆ†å‰²
    â”œâ”€â”€ dora-qwen/       # Qwen å¤§è¯­è¨€æ¨¡å‹
    â””â”€â”€ ...              # AI/ç¡¬ä»¶èŠ‚ç‚¹ç”Ÿæ€
```

### æŠ€æœ¯ä¼˜åŠ¿

1. **æè‡´æ€§èƒ½**: Rust + å…±äº«å†…å­˜ + Apache Arrowï¼Œæ¯” ROS2 å¿« 10-17 å€
2. **é›¶æ‹·è´é€šä¿¡**: åŸºäº Apache Arrow çš„é«˜æ•ˆæ•°æ®ä¼ è¾“
3. **è·¨è¯­è¨€æ”¯æŒ**: Python æ™ºèƒ½ä½“å¯ä¸ Rust/C++ ç¡¬ä»¶èŠ‚ç‚¹æ— ç¼åä½œ
4. **å®æ—¶æ•°æ®æµ**: æ¯«ç§’çº§å»¶è¿Ÿçš„èŠ‚ç‚¹é—´é€šä¿¡

## ğŸ”„ æ•°æ®æµé©±åŠ¨çš„è®¾è®¡å“²å­¦

### æ•°æ®æµ vs å·¥ä½œæµ

MoFA é€‰æ‹©äº†æ•°æ®æµé©±åŠ¨è€Œéä¼ ç»Ÿçš„å·¥ä½œæµé©±åŠ¨æ–¹å¼ï¼š

```
ä¼ ç»ŸAIæ¡†æ¶ (å·¥ä½œæµé©±åŠ¨):
Task â†’ Rule â†’ Step â†’ Rule â†’ Step â†’ Result

MoFA+Dora (æ•°æ®æµé©±åŠ¨):
Data â†’ Node â†’ Data â†’ Node â†’ Data â†’ Result
  â†‘      â†‘      â†‘      â†‘      â†‘
  |   æ™ºèƒ½ä½“   |   æ™ºèƒ½ä½“   |
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€Doraé«˜æ€§èƒ½é€šä¿¡â”€â”€â”€â”€â”€â”€â”˜
```

### é…ç½®å³ä»£ç 

é€šè¿‡ç®€å•çš„ YAML é…ç½®å®ç°å¤æ‚çš„æ™ºèƒ½ä½“ç»„åˆï¼š

```yaml
# hello_world_dataflow.yml
nodes:
  - id: terminal-input
    build: pip install -e ../../node-hub/terminal-input
    path: dynamic
    outputs: [data]
    inputs:
      agent_response: hello-world-agent/hello_world_result
      
  - id: hello-world-agent
    build: pip install -e ../../agent-hub/hello-world
    path: hello-world
    outputs: [hello_world_result]
    inputs:
      query: terminal-input/data
    env:
      IS_DATAFLOW_END: true
      WRITE_LOG: true
```

## ğŸ”— å…³é”®é›†æˆç‚¹åˆ†æ

### 1. åŸºç¡€æ™ºèƒ½ä½“çš„ Dora é›†æˆ

MoFA çš„æ¯ä¸ªæ™ºèƒ½ä½“æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ª Dora èŠ‚ç‚¹ï¼š

```python
# MoFA æ™ºèƒ½ä½“ç›´æ¥ä½¿ç”¨ Dora Node
from dora import Node

class MofaAgent:
    def __attrs_post_init__(self):
        self.node = Node(self.agent_name)  # åˆ›å»º Dora èŠ‚ç‚¹
```

### 2. ç”Ÿæ€ç³»ç»Ÿçš„æ‰©å±•å…³ç³»

| ç»„ä»¶ç±»å‹ | DoraåŸç”Ÿ | MoFAæ‰©å±•/ä½¿ç”¨ |
|----------|----------|---------------|
| åŸºç¡€è¾“å…¥/è¾“å‡º | `terminal-input`, `terminal-print` | âœ“ ç›´æ¥ä½¿ç”¨ |
| AIæ¨¡å‹èŠ‚ç‚¹ | `dora-yolo`, `dora-qwen`, `dora-sam2` | âœ“ ä½œä¸ºæ™ºèƒ½ä½“ç»„ä»¶ |
| MoFAä¸“ç”¨ | - | `dora-openai-server`, `openai-server-stream` |
| æ™ºèƒ½ä½“ç±» | - | `agent-hub/*` (40+æ™ºèƒ½ä½“) |

### 3. æ•°æ®æµçš„æ— ç¼è¿æ¥

é€šè¿‡ Dora çš„æ•°æ®æµæœºåˆ¶ï¼ŒMoFA æ™ºèƒ½ä½“å¯ä»¥ï¼š
- ä¸ç¡¬ä»¶è®¾å¤‡ç›´æ¥é€šä¿¡
- ä¸ AI æ¨¡å‹èŠ‚ç‚¹å®æ—¶äº¤äº’
- å½¢æˆå¤æ‚çš„æ™ºèƒ½ä½“ç½‘ç»œ

## ğŸ¯ ç»„åˆå¼ AI çš„å®ç°

### æ™ºèƒ½ä½“ç»„åˆå±‚æ¬¡

```
SuperAgent (è¶…çº§æ™ºèƒ½ä½“)
    â†“
CompositeAgent (ç»„åˆæ™ºèƒ½ä½“)
    â†“
AtomicAgent (åŸå­æ™ºèƒ½ä½“)
    â†“
MofaAgent (åŸºç¡€æ™ºèƒ½ä½“)
    â†“
Dora Node (DoraèŠ‚ç‚¹)
```

### å®é™…åº”ç”¨ç¤ºä¾‹

```python
# åŸå­æ™ºèƒ½ä½“ç¤ºä¾‹
@run_agent
def run(agent: MofaAgent):
    user_query = agent.receive_parameter('query')
    # å¤„ç†é€»è¾‘
    agent.send_output('result', processed_data)

# é€šè¿‡æ•°æ®æµç»„åˆæˆå¤æ‚åº”ç”¨
# input â†’ reasoning_agent â†’ memory_agent â†’ output
```

## ğŸš€ æ€§èƒ½ä¼˜åŠ¿ä¸æŠ€æœ¯åˆ›æ–°

### 1. é«˜æ€§èƒ½åŸºç¡€
- **Rust å†…æ ¸**: å†…å­˜å®‰å…¨ + é›¶æˆæœ¬æŠ½è±¡
- **å…±äº«å†…å­˜**: é¿å…æ•°æ®æ‹·è´å¼€é”€
- **Apache Arrow**: åˆ—å¼å†…å­˜æ ¼å¼ï¼Œé«˜æ•ˆåºåˆ—åŒ–

### 2. å¼€å‘æ•ˆç‡
- **é›¶ä»£ç ç»„åˆ**: YAML é…ç½®å®Œæˆå¤æ‚åº”ç”¨
- **æ¨¡æ¿ç”Ÿæ€**: é¢„æ„å»ºçš„æ™ºèƒ½ä½“å’Œæ¨¡å¼
- **è·¨è¯­è¨€**: ä¸€å¥—æ¡†æ¶ï¼Œå¤šç§è¯­è¨€

### 3. å¯æ‰©å±•æ€§
- **åˆ†å¸ƒå¼**: å¤©ç„¶æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
- **æ¨¡å—åŒ–**: æ¾è€¦åˆçš„ç»„ä»¶è®¾è®¡
- **ç”Ÿæ€ä¸°å¯Œ**: 60+ Dora èŠ‚ç‚¹ + 40+ MoFA æ™ºèƒ½ä½“

## ğŸ”® é¢å‘æœªæ¥çš„ AI æ“ä½œç³»ç»Ÿ

MoFA çš„æ„¿æ™¯æ˜¯æ„å»ºçœŸæ­£çš„ AI æ“ä½œç³»ç»Ÿ (AIOS)ï¼š

- **å†…æ ¸æœåŠ¡**: Memoryã€Planningã€RAGã€Tools
- **åº”ç”¨å±‚**: æ™ºèƒ½ä½“æ¨¡æ¿å’Œé¢„æ„å»ºåº”ç”¨
- **Shell**: æ•°æ®æµé…ç½®å’Œç¼–æ’ç¯å¢ƒ
- **ç”Ÿæ€ç³»ç»Ÿ**: å¼€æ”¾çš„èŠ‚ç‚¹å’Œæ™ºèƒ½ä½“å¸‚åœº

## ğŸ“ˆ å®é™…åº”ç”¨åœºæ™¯

### 1. æœºå™¨äººæ§åˆ¶
```
Camera â†’ YOLO â†’ Path Planning â†’ Motor Control
   â†“        â†“         â†“           â†“
 è§†è§‰è¾“å…¥ â†’ ç›®æ ‡æ£€æµ‹ â†’ è·¯å¾„è§„åˆ’ â†’ åŠ¨ä½œæ‰§è¡Œ
```

### 2. å¤šæ¨¡æ€ AI åº”ç”¨
```
Text/Image â†’ VLM â†’ Reasoning â†’ Action
     â†“        â†“       â†“        â†“
   å¤šæ¨¡æ€è¾“å…¥ â†’ ç†è§£ â†’ æ¨ç† â†’ æ‰§è¡Œ
```

### 3. æ™ºèƒ½å®¢æœç³»ç»Ÿ
```
Voice â†’ STT â†’ LLM â†’ TTS â†’ Speaker
  â†“      â†“     â†“     â†“      â†“
è¯­éŸ³è¾“å…¥ â†’ è½¬æ–‡å­— â†’ ç†è§£å›ç­” â†’ è½¬è¯­éŸ³ â†’ æ’­æ”¾
```

## ğŸ‰ æ€»ç»“

MoFA åŸºäº Dora-RS æ„å»ºäº†ä¸€ä¸ªç‹¬ç‰¹çš„æ™ºèƒ½ä½“å¼€å‘æ¡†æ¶ï¼Œå®ƒä¸ä»…æä¾›äº†ï¼š

1. **é«˜æ€§èƒ½åŸºç¡€**: åŸºäº Rust çš„æè‡´æ€§èƒ½
2. **ç®€åŒ–å¼€å‘**: æ¨¡æ¿åŒ–çš„æ™ºèƒ½ä½“æ„å»º
3. **çµæ´»ç»„åˆ**: æ•°æ®æµé©±åŠ¨çš„ç»„åˆæ–¹å¼
4. **ä¸°å¯Œç”Ÿæ€**: é¢„æ„å»ºçš„èŠ‚ç‚¹å’Œæ™ºèƒ½ä½“åº“
5. **é¢å‘æœªæ¥**: AIOS çš„æŠ€æœ¯åŸºç¡€

è¿™ç§**åˆ†å±‚æ¶æ„**ä½¿å¾—å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚çš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒæ—¶ç³»ç»Ÿåˆèƒ½è·å¾—å·¥ä¸šçº§çš„æ€§èƒ½è¡¨ç°ã€‚

éšç€ AI æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼ŒMoFA ä¸ºæ„å»ºä¸‹ä¸€ä»£æ™ºèƒ½ä½“åº”ç”¨æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å¹³å°ã€‚æ— è®ºæ˜¯ç®€å•çš„å¯¹è¯æœºå™¨äººï¼Œè¿˜æ˜¯å¤æ‚çš„å¤šæ¨¡æ€ AI ç³»ç»Ÿï¼ŒMoFA éƒ½èƒ½æä¾›åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚

---

**æƒ³äº†è§£æ›´å¤šï¼Ÿ**
- ğŸ“š [å¿«é€Ÿå¼€å§‹æŒ‡å—](/docs/quick-start)
- ğŸ› ï¸ [æ™ºèƒ½ä½“å¼€å‘æ•™ç¨‹](/docs/agent-development)
- ğŸŒŸ [GitHub ä»“åº“](https://github.com/moxin-org/mofa)
- ğŸ’¬ [åŠ å…¥ç¤¾åŒºè®¨è®º](https://discord.gg/mofa) 