---
// Footer component with consistent styling from main page
// Fetch GitHub stats for the star call-to-action
let starCount = '19K+';
let forkCount = '2K+';

try {
  const response = await fetch('https://api.github.com/repos/mofa-org/mofa');
  if (response.ok) {
    const data = await response.json();
    
    // Format star count
    const stars = data.stargazers_count;
    if (stars >= 1000) {
      starCount = (stars / 1000).toFixed(1).replace('.0', '') + 'K';
    } else {
      starCount = stars.toString();
    }
    
    // Format fork count  
    const forks = data.forks_count;
    if (forks >= 1000) {
      forkCount = (forks / 1000).toFixed(1).replace('.0', '') + 'K';
    } else {
      forkCount = forks.toString();
    }
  }
} catch (error) {
  console.log('Failed to fetch GitHub stats:', error);
}
---

<footer style="background-color: var(--mondrian-black); color: white;">
  <div class="container py-12">
    <div class="text-center">
      <div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 16px;">
        <img src="/mofa-logo.png" alt="MoFA Logo" style="width: 32px; height: 32px; border-radius: 6px; object-fit: cover;" />
        <span style="font-size: 1.25rem; font-weight: 700;">MoFA</span>
      </div>
      <p style="color: #9ca3af; margin-bottom: 8px;" 
         data-en="Make Ordinary Developers Full-stack AI Engineers"
         data-zh="让普通开发者成为全栈 AI 工程师">
        Make Ordinary Developers Full-stack AI Engineers
      </p>
      <p style="color: #9ca3af; margin-bottom: 24px;" 
         data-en="Modular Framework for AI Agents"
         data-zh="模块化 AI 代理框架">
        Modular Framework for AI Agents
      </p>
      <!-- Star Call-to-Action Section -->
      <div class="star-cta-section" style="background: #2a2a2a; border: 3px solid #333; padding: 24px; margin: 32px 0; max-width: 480px; margin-left: auto; margin-right: auto;">
        <div style="margin-bottom: 20px;">
          <h3 style="color: #ffffff; font-size: 1.2rem; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.02em;" data-en="Support MoFA Development" data-zh="支持 MoFA 开发">
            支持 MoFA 开发
          </h3>
          <p style="color: #9ca3af; font-size: 0.95rem; margin-bottom: 0; line-height: 1.4;" data-en="Help us build the future of AI agent frameworks" data-zh="帮助我们构建 AI 代理框架的未来">
            帮助我们构建 AI 代理框架的未来
          </p>
        </div>
        
        <!-- CTA Button -->
        <a href="https://github.com/mofa-org/mofa" target="_blank" rel="noopener noreferrer" class="star-button" style="
          background: linear-gradient(90deg, #FF5039, #FF6756); 
          color: white; 
          padding: 14px 24px; 
          border: 2px solid #FF5039;
          text-decoration: none; 
          font-weight: 700; 
          display: inline-flex; 
          align-items: center; 
          gap: 10px;
          transition: all 0.2s ease;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          font-size: 0.9rem;
        " onmouseover="this.style.background='linear-gradient(90deg, #FFC938, #6ACFD1)'; this.style.borderColor='#FFC938'" onmouseout="this.style.background='linear-gradient(90deg, #FF5039, #FF6756)'; this.style.borderColor='#FF5039'">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span data-en="STAR ON GITHUB" data-zh="在 GITHUB 上 STAR">在 GITHUB 上 STAR</span>
          <span style="background: rgba(255,255,255,0.2); color: white; padding: 4px 8px; font-size: 0.8rem; font-weight: 900; border: 1px solid rgba(255,255,255,0.3);">
            {starCount}
          </span>
        </a>
      </div>
      
      <!-- Regular Footer Links -->
      <div style="display: flex; justify-content: center; gap: 32px; margin-bottom: 16px;">
        <a href="https://github.com/mofa-org/mofa" target="_blank" rel="noopener noreferrer" style="color: #9ca3af; text-decoration: none; transition: color 0.2s ease;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">GitHub</a>
        <a href="https://discord.gg/hKJZzDMMm9" target="_blank" rel="noopener noreferrer" style="color: #9ca3af; text-decoration: none; transition: color 0.2s ease;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Discord</a>
        <a href="/docs" style="color: #9ca3af; text-decoration: none; transition: color 0.2s ease;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'" 
            data-en="Docs" data-zh="文档">Docs</a>
      </div>
      <p style="color: #6b7280; font-size: 0.875rem;" 
         data-en="&copy; 2025 MoFA. All rights reserved."
         data-zh="&copy; 2025 MoFA. 保留所有权利.">
        &copy; 2024 MoFA. All rights reserved.
      </p>
    </div>
  </div>
</footer>

<button id="back-to-top" style="position: fixed; bottom: 40px; right: 40px; z-index: 50; display: none; background: #FFC938; color: #333; border: none; border-radius: 50%; width: 48px; height: 48px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); font-size: 24px; cursor: pointer; transition: background-color 0.3s, opacity 0.3s, visibility 0.3s;" aria-label="Back to top">↑</button>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const backToTopButton = document.getElementById('back-to-top');
    const starCtaSection = document.querySelector('.star-cta-section');
    
    // 返回顶部按钮逻辑
    if (backToTopButton) {
      window.addEventListener('scroll', function() {
        if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
          backToTopButton.style.display = "block";
        } else {
          backToTopButton.style.display = "none";
        }
      });

      backToTopButton.addEventListener('click', function(){
        window.scrollTo({top: 0, behavior: 'smooth'});
      });
    }
    
    // Star CTA 简单交互
    if (starCtaSection) {
      const starButton = starCtaSection.querySelector('.star-button');
      if (starButton) {
        starButton.addEventListener('click', function() {
          // 添加点击反馈
          this.style.transform = 'scale(0.98)';
          setTimeout(() => {
            this.style.transform = '';
          }, 100);
        });
      }
    }
  });
</script>

<style>
  /* 响应式调整 */
  @media (max-width: 640px) {
    .star-cta-section {
      margin: 24px 16px !important;
      padding: 20px !important;
      max-width: none !important;
    }
    
    .star-button {
      font-size: 0.85rem !important;
      padding: 12px 20px !important;
      gap: 8px !important;
    }
  }
  
  /* Star 按钮交互 */
  .star-button:hover {
    transform: translateY(-1px) !important;
  }
  
  .star-button:active {
    transform: translateY(0) scale(0.98) !important;
  }
</style> 